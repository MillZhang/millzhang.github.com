---
layout:             post
atitle:               "讲清基础"
title:                 "2019-07-04-讲清基础"
date:                2019-07-04
author:            "millzhang"
catalog:           true
header-style:   text
tags:
    - javascript
    - css
---

## Javascript

#### `js`为什么是单线程的？单线程的`js`是怎么实现异步的？

问题一：多线程的`js`操作同一个DOM，会造成浏览器的执行冲突（比如：一个删除，一个修改）。
问题二：通过事件循环机制（EventLoop）实现异步；

#### `EventLoop`

> JS是单线程的，主线程拥有一个执行栈和执行队列。主线程自上而下依次执行代码，并判断函数是同步的还是异步的，同步的函数直接在主线程中执行，异步函数塞入执行队列。当主线程的函数执行完毕后，再将异步函数从执行队列中出栈，直到执行完毕。

**macrotasks:**
 - setTimeout 
 - setInterval 
 - setImmediate 
 - requestAnimationFrame
 - I/O
 - UI rendering
 
**microtasks:**
 - process.nextTick 
 - Promises 
 - Object.observe 
 - MutationObserver

==microtask的执行优先级高于macrotask==

![执行流程](http://pt2rm5f05.bkt.clouddn.com/story20197/cc25765bc052d6ff9439ef97a9da17bc.png)

*浏览器和Node的执行顺序不一样，上述规则适用于浏览器*
- https://github.com/kaola-fed/blog/issues/234

## CSS

#### 两列或三列布局

- 使用flex
- float
- 左右`position:absolute`,中间`margin-left,margin-right`

#### 垂直水平居中

- 水平居中`text-align:center`和块级元素的`margin:0 auto;`
- table方案，（IE8+）

```html
<style>
.table{
	display:table;
}
.cell{
	display:table-cell;
	text-align:center;
	vertical-align:middle;
}
</style>
<div class="table">
	<div class="cell">
		<img src="http://p0.qhimg.com/t01c430356016e16a2c.png" alt="" />
	</div>
</div>
```

- `absolute+margin:auto`方案，兼容主流的浏览器；但是需要定义父容器的高度，否则子元素绝对定位会导致父元素的坍塌。

```css
.absolute-aligned {
    position: relative;
    min-height: 500px;
    background: hsl(200, 100%, 97%);
}
.absolute-aligned img {
    margin: auto;
    position: absolute;
    top: 0; left: 0;
    bottom: 0; right: 0;
}
```

- `absolute+translate`，(IE9+)，同样需要设置父元素的高度

```css
.center {
    background: hsl(180, 100%, 97%);
    position: relative;
    min-height: 500px;
}
.center img {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 30%; 
}
```

- `Flexbox`方案

```css
.center { 
    background: hsl(240, 100%, 97%);
    display: flex;
    justify-content: center;
    align-items: center;
}
```

-  `calc`方案，IE9+，更适合子元素宽高固定的情况

```css
// 50%是父元素的中心点，减去图片宽度和高度的一半从而达到定位效果
.calc {
  background-color: hsl(300, 100%, 90%);
  min-height: 350px;
  position: relative;
}

.calc img {
  width: 100px;
  height: 100px;
  position: absolute;
  left: calc(50% - 50px);
  top: calc(50% - 50px);
}

```

## Framework