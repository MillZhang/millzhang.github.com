---
layout:     post
title:      "OpenLdap"
subtitle:   "ubuntu openladp安装指南"
date:       2018-6-14
author:     "millzhang"
tags:
    - server
---


### [install apache and allow in firewall](https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu-16-04)

1.安装apache

```
sudo apt-get update
sudo apt-get install apache2
```

2.配置serverName剔除警告

```
# 1
sudo vi /etc/apache2/apache2.conf
# 2.添加serverName
ServerName server_domain_or_IP
# 3.测试警告
sudo apache2ctl configtest
# 4.重启
systemctl restart apache2
```
3.调整防火墙入栈规则

```
sudo ufw app list
ufw allow in "Apache Full"
```

### 安装mysql

### 安装Ldap server

1.安装

```
sudo apt-get update
sudo apt-get install slapd ldap-utils
```

2.配置

```
sudo dpkg-reconfigure slapd
```
* Omit OpenLDAP server configuration? 【No】
* DNS domain name 【cloudwalk.cn】
* Organization name 【admin】
* Administrator password 【xxx】
* Database backend 【MDB】
* Remove the database when slapd is purged 【NO】
* Move old database 【Yes】
* Allow LDAPv2 protocol 【No】

### 安装php

```
apt-get install phpldapadmin
```

配置:

```php
sudo vi /etc/phpldapadmin/config.php

...
$servers->setValue('server','name','CloudWalk LDAP');
$servers->setValue('server','base', array('dc=cloudwalk,dc=cn'));
$config->custom->appearance['hide_template_warning'] = true;
```

登录地址：http://ip_address:444/phpldapadmin

> 登录账号：cn=admin,dc=cloudwalk,dc=cn

> 密码：xxxxx